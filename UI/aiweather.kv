#:import dp kivy.metrics.dp

<MainUI>:
    orientation: "vertical"
    padding: dp(15)
    spacing: dp(12)

    GridLayout:
        cols: 2
        size_hint_y: None
        height: self.minimum_height
        row_force_default: True
        row_default_height: dp(90)
        spacing: dp(20)

        # ───────── 1 · WEATHER ─────────
        BoxLayout:
            spacing: dp(8)
            Label:
                id: weather_icon
                font_name: "Emoji"
                text: ""
                font_size: "40sp"
                size_hint_x: None
                width: self.texture_size[0]
            Label:
                id: weather_label
                text: "—"
                font_name: "UI"
                markup: True
                halign: "left"
                valign: "middle"
                text_size: self.width, None
        Button:
            text: "Request"
            size_hint_x: None
            width: dp(180)
            on_release: root.toggle_request_bar()

        # ───────── 2 · NEWS ─────────
        Label:
            id: news_label
            text: "—"
            font_name: "UI"
            markup: True
            halign: "left"
            valign: "middle"
            text_size: self.width, None
        Button:
            text: "Refresh news"
            size_hint_x: None
            width: dp(180)
            on_release: app.refresh_news()

        # ───────── 3 · MUSIC ─────────
        BoxLayout:
            spacing: dp(8)
            Label:
                id: music_icon
                font_name: "Emoji"
                text: ""
                font_size: "34sp"
                size_hint_x: None
                width: self.texture_size[0]
            Label:
                id: music_label
                text: "—"
                font_name: "UI"
                halign: "left"
                valign: "middle"
                text_size: self.width, None
        BoxLayout:
            id: music_controls
            spacing: dp(4)
            size_hint_x: None
            width: dp(180)
            Button:
                id: btn_back
                font_name: "Emoji"
                text: "⏮️"
                font_size: "3sp"
                on_release: app.music_back()
            Button:
                id: btn_play
                font_name: "Emoji"
                text: "▶️"
                font_size: "3sp"
                on_release: app.music_play_pause()
            Button:
                id: btn_fwd
                font_name: "Emoji"
                text: "⏭️"
                font_size: "3sp"
                on_release: app.music_forward()
            Button:
                id: btn_stop
                font_name: "Emoji"
                text: "⏹️"
                font_size: "3sp"
                on_release: app.music_stop()

        # ───────── 4 · REMINDERS ─────────
        BoxLayout:
            orientation: 'horizontal'
            spacing: dp(8)
            Label:
                id: reminder_icon
                text: "📝"
                font_name: "Emoji"
                font_size: "34sp"
                size_hint_x: None
                width: self.texture_size[0]
            Label:
                id: reminder_summary
                text: "—"
                font_name: "UI"
                font_size: "13sp"
                halign: "left"
                valign: "middle"
                text_size: self.width, None
        BoxLayout:
            id: reminders_controls
            spacing: dp(4)
            size_hint_x: None
            width: dp(180)
            Button:
                id: btn_open_rem
                text: "Open Reminders"
                font_size: "12sp"
                on_release: app.open_reminder_popup()
            Button:
                id: btn_add_rem
                text: "Add Reminders"
                font_size: "12sp"
                on_release: app.open_add_reminder_popup()

    # ───────── REQUEST BAR ─────────
    BoxLayout:
        id: request_bar
        size_hint_y: None
        height: 0
        opacity: 0
        spacing: dp(8)

        TextInput:
            id: request_input
            font_name: "UI"
            multiline: False
            write_tab: False
            hint_text: "Type a request..."
            on_text_validate: app.process_request()
        Button:
            text: "Send"
            size_hint_x: None
            width: dp(100)
            on_release: app.process_request()
